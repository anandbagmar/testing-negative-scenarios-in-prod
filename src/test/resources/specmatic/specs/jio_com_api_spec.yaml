openapi: 3.0.1
info:
  title: New feature
  version: "1"
  description: "API for Jio recharge and paybill flows. This spec was generated by Specmatic based on recorded traffic."
paths:
  /api/jio-recharge-service/recharge/mobility/number/{mobileNumber}:
    get:
      summary: Get Mobile recharge details
      description: "Return primary service information and product type for the supplied mobile number. Use this to determine available recharge options and primary service metadata."
      parameters:
        - name: mobileNumber
          in: path
          description: "Mobile number to look up (digits only)."
          required: true
          schema:
            type: string
        - name: Accept
          in: header
          description: "HTTP Accept header indicating expected response media type (e.g. application/json)."
          required: true
          schema:
            type: string
      responses:
        "200":
          description: "Success: mobile number found — returns primaryService, productType, partyId and pagination token (nextPage when applicable)."
          headers:
            Connection:
              required: true
              schema:
                type: string
            Set-Cookie:
              required: false
              schema:
                type: string
            Strict-Transport-Security:
              required: true
              schema:
                type: string
            X-XSS-Protection:
              required: false
              schema:
                type: string
            x-frame-options:
              required: true
              schema:
                type: string
            x-content-type-options:
              required: true
              schema:
                type: string
            Referrer-Policy:
              required: true
              schema:
                type: string
            x-handled-by:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RechargeMobilityNumberResponseBody"
        "400":
          description: "Bad Request: the provided mobile number is invalid or malformed. Response includes errorCode and errorMessage."
          headers:
            Connection:
              required: true
              schema:
                type: string
            x-frame-options:
              required: true
              schema:
                type: string
            x-content-type-options:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RechargeMobilityNumberBadRequestResponseBody"
  /api/jio-paybill-service/paybill/submitDetail/{mobileNumber}/{id}:
    get:
      summary: Fetch paybill submit details for a service id and mobile number
      description: "Fetch paybill submit details for a service id and mobile number. Useful to obtain the payment URL and flags required before initiating payment."
      parameters:
        - name: mobileNumber
          in: path
          description: "Target mobile number for which paybill details are requested."
          required: true
          schema:
            type: string
        - name: id
          in: path
          description: "Numeric identifier for the paybill entry or plan."
          required: true
          schema:
            type: integer
            format: int32
        - name: serviceType
          in: query
          description: "Optional service type filter (e.g. 'prepaid' or 'postpaid')."
          schema:
            type: string
        - name: rechargeType
          in: query
          description: "Optional recharge type (e.g. 'fullRecharge', 'topup')."
          schema:
            type: string
        - name: Accept
          in: header
          description: "HTTP Accept header (e.g. application/json)."
          required: true
          schema:
            type: string
      responses:
        "200":
          description: "Success: returns paymentURL and flags (prime/post). Indicates the client may redirect or present the payment URL."
          headers:
            Connection:
              required: true
              schema:
                type: string
            Set-Cookie:
              required: false
              schema:
                type: string
            Strict-Transport-Security:
              required: true
              schema:
                type: string
            X-XSS-Protection:
              required: false
              schema:
                type: string
            x-frame-options:
              required: true
              schema:
                type: string
            x-content-type-options:
              required: true
              schema:
                type: string
            Referrer-Policy:
              required: true
              schema:
                type: string
            x-handled-by:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaybillSubmitDetailResponseBody"
        "400":
          description: "Bad Request: invalid id or mobile number; response contains error details and optional dynamic messages."
          headers:
            Connection:
              required: true
              schema:
                type: string
            Set-Cookie:
              required: false
              schema:
                type: string
            x-frame-options:
              required: true
              schema:
                type: string
            x-content-type-options:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaybillSubmitDetailBadRequestResponseBody"
  /api/jio-recharge-service/recharge/plans/serviceId/{mobileNumber}:
    get:
      summary: Fetch available recharge plans
      description: "Return available recharge plans grouped into categories for the mobile number's service id. 200 on success with planCategories; 401 if authentication/authorization fails."
      parameters:
        - name: mobileNumber
          in: path
          description: "Mobile number used to scope available plans (digits only)."
          required: true
          schema:
            type: string
        - name: Accept
          in: header
          description: "HTTP Accept header (e.g. application/json)."
          required: true
          schema:
            type: string
        - name: Cookie
          in: header
          description: "Optional cookies for session state when required."
          required: false
          schema:
            type: string
      responses:
        "401":
          description: "Unauthorized: request lacks valid authentication/authorization to view plans."
          headers:
            Connection:
              required: true
              schema:
                type: string
            x-frame-options:
              required: true
              schema:
                type: string
            x-content-type-options:
              required: true
              schema:
                type: string
            Set-Cookie:
              required: false
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RechargePlansServiceIdUnauthorisedResponseBody"
        "200":
          description: "Success: returns planCategories with nested plans, metadata and filters appropriate for the service."
          headers:
            Connection:
              required: true
              schema:
                type: string
            Set-Cookie:
              required: false
              schema:
                type: string
            Strict-Transport-Security:
              required: true
              schema:
                type: string
            X-XSS-Protection:
              required: false
              schema:
                type: string
            x-frame-options:
              required: true
              schema:
                type: string
            x-content-type-options:
              required: true
              schema:
                type: string
            Referrer-Policy:
              required: true
              schema:
                type: string
            x-handled-by:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RechargePlansServiceIdResponseBody"
  /api/jio-recharge-service/recharge/buy:
    post:
      summary: Create a purchase intent for a selected plan
      description: "Create a purchase intent for a selected plan. Provide planKey and selectedService. On success the response contains UI flags and service lists used in subsequent pay flow."
      parameters:
        - name: Accept
          in: header
          description: "HTTP Accept header (e.g. application/json)."
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RechargeBuyRequestBody"
        required: true
      responses:
        "200":
          description: "Success: buy intent created. Response includes flags (bypassCart), lists of services and any special flow indicators for further steps."
          headers:
            Connection:
              required: true
              schema:
                type: string
            Set-Cookie:
              required: false
              schema:
                type: string
            Strict-Transport-Security:
              required: true
              schema:
                type: string
            X-XSS-Protection:
              required: false
              schema:
                type: string
            x-frame-options:
              required: true
              schema:
                type: string
            x-content-type-options:
              required: true
              schema:
                type: string
            Referrer-Policy:
              required: true
              schema:
                type: string
            x-handled-by:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RechargeBuyResponseBody"
  /api/jio-recharge-service/recharge/pay:
    post:
      summary: Initiate payment
      description: "Initiate payment for one or more servicePlanList items. Returns a paymentURL and flags used by the client to continue payment processing."
      parameters:
        - name: Accept
          in: header
          description: "HTTP Accept header (e.g. application/json)."
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RechargePayRequestBody"
        required: true
      responses:
        "200":
          description: "Success: returns paymentURL to continue payment flow and a boolean indicating if POS flow is required."
          headers:
            Connection:
              required: true
              schema:
                type: string
            Set-Cookie:
              required: false
              schema:
                type: string
            Strict-Transport-Security:
              required: true
              schema:
                type: string
            X-XSS-Protection:
              required: false
              schema:
                type: string
            x-frame-options:
              required: true
              schema:
                type: string
            x-content-type-options:
              required: true
              schema:
                type: string
            Referrer-Policy:
              required: true
              schema:
                type: string
            x-handled-by:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RechargePayResponseBody"

components:
  schemas:
    PrimaryService:
      description: "Primary service record associated with a subscriber, contains service identification and billing flags."
      required:
        - billingType
        - deleted
        - primeMember
        - serviceId
      type: object
      properties:
        serviceId:
          type: string
          description: "Unique identifier for the service (internal service id)."
        primeMember:
          type: boolean
          description: "Whether the subscriber is a prime member."
        billingType:
          type: string
          description: "Billing category (e.g. 'postpaid', 'prepaid')."
        deleted:
          type: boolean
          description: "Indicates whether the service is marked deleted."
    RechargeMobilityNumberResponseBody:
      description: "Response body for a successful mobility number lookup. Contains primaryService, productType, partyId and optional pagination token."
      required:
        - nextPage
        - partyId
        - primaryService
        - productType
      type: object
      properties:
        primaryService:
          $ref: "#/components/schemas/PrimaryService"
        nextPage:
          type: string
          description: "Token for the next page of results when available."
        productType:
          type: string
          description: "Product classification for the service (e.g. 'mobile', 'fiber')."
        partyId:
          type: string
          description: "Identifier for the subscriber or account party."
    PaybillSubmitDetailResponseBody:
      description: "Successful paybill submit detail — provides a paymentURL and boolean flags to indicate prime/post behavior."
      required:
        - paymentURL
        - post
        - prime
      type: object
      properties:
        paymentURL:
          type: string
          description: "Redirect URL or link to proceed with payment for the selected bill."
        prime:
          type: boolean
          description: "Indicates whether prime member pricing/flow applies."
        post:
          type: boolean
          description: "Indicates whether the bill is postpaid."
    RechargeMobilityNumberBadRequestResponseBody:
      description: "Error response for invalid mobility lookup; includes machine-readable errorCode and human errorMessage."
      required:
        - errorCode
        - errorMessage
      type: object
      properties:
        errorCode:
          type: string
          description: "Short machine-readable error code."
        errorMessage:
          type: string
          description: "Human-readable error description explaining the failure."
    PaybillSubmitDetailBadRequestResponseBody:
      description: "Error response for paybill submit detail request; may include dynamic messages for client presentation."
      required:
        - dynMsg
        - errorCode
        - errorMessage
      type: object
      properties:
        errorCode:
          type: string
          description: "Machine-readable error code."
        errorMessage:
          type: string
          description: "Human-readable error message."
        dynMsg:
          type: array
          description: "Optional array of dynamic messages to display in the client UI."
          items:
            type: string
    RechargePlansServiceIdUnauthorisedResponseBody:
      required:
        - errorCode
        - errorMessage
      type: object
      properties:
        errorCode:
          type: string
        errorMessage:
          type: string
    BadgeData:
      required:
        - animationCount
        - badgeColor
        - badgeJson
        - badgeTextColor
        - borderAnimationCount
        - cardBackground
        - cardTheme
        - gradientColorArray
      type: object
      properties:
        badgeColor:
          type: string
        badgeTextColor:
          type: string
        badgeJson:
          type: string
        cardTheme:
          type: string
        gradientColorArray:
          type: array
          items:
            type: string
        cardBackground:
          type: string
        animationCount:
          type: integer
        borderAnimationCount:
          type: integer
    Items__:
      required:
        - exactId
        - exactIdKey
        - id
        - idKey
        - label
      type: object
      properties:
        label:
          type: string
        id:
          type: string
        idKey:
          type: string
        exactId:
          type: string
        exactIdKey:
          type: string
    Items___:
      required:
        - exactId
        - exactIdKey
        - id
        - idKey
        - label
      type: object
      properties:
        label:
          type: string
        id:
          type: string
        idKey:
          type: string
        exactId:
          type: string
        exactIdKey:
          type: string
    "3":
      required:
        - header
        - items
      type: object
      properties:
        header:
          type: string
        items:
          type: array
          items:
            $ref: "#/components/schemas/Items___"
    DescChars:
      required:
        - name
        - value
      type: object
      properties:
        name:
          type: string
        value:
          type: string
    Notes:
      required:
        - message
        - rows
        - type
      type: object
      properties:
        type:
          type: string
        rows:
          type: integer
        message:
          type: string
    SideFilters:
      required:
        - country
        - filterKey
        - label
      type: object
      properties:
        label:
          type: string
        filterKey:
          type: string
        country:
          type: boolean
    Items:
      required:
        - exactId
        - exactIdKey
        - id
        - idKey
        - label
      type: object
      properties:
        label:
          type: string
        id:
          type: string
        idKey:
          type: string
        exactId:
          type: string
        exactIdKey:
          type: string
    "0":
      type: object
      properties:
        header:
          type: string
        items:
          type: array
          items:
            $ref: "#/components/schemas/Items"
    Items_:
      required:
        - exactId
        - exactIdKey
        - id
        - idKey
        - label
      type: object
      properties:
        label:
          type: string
        id:
          type: string
        idKey:
          type: string
        exactId:
          type: string
        exactIdKey:
          type: string
    "1":
      required:
        - header
        - items
      type: object
      properties:
        header:
          type: string
        items:
          type: array
          items:
            $ref: "#/components/schemas/Items_"
    "2":
      required:
        - header
        - items
      type: object
      properties:
        header:
          type: string
        items:
          type: array
          items:
            $ref: "#/components/schemas/Items__"
    FilterDetails:
      required:
        - "0"
        - "1"
        - "2"
      type: object
      properties:
        "0":
          $ref: "#/components/schemas/0"
        "1":
          $ref: "#/components/schemas/1"
        "2":
          $ref: "#/components/schemas/2"
        "3":
          $ref: "#/components/schemas/3"
    Filters:
      required:
        - filterDetails
        - sideFilters
      type: object
      properties:
        sideFilters:
          type: array
          items:
            $ref: "#/components/schemas/SideFilters"
        filterDetails:
          $ref: "#/components/schemas/FilterDetails"
    CustomFilters:
      required:
        - exactId
        - exactIdKey
        - label
      type: object
      properties:
        label:
          type: string
        exactId:
          type: string
        exactIdKey:
          type: string
        id:
          type: string
        idKey:
          type: string
    Note:
      required:
        - rows
      type: object
      properties:
        rows:
          type: integer
    PrimeData:
      required:
        - freeData
        - freeDataUnits
        - offerBenefits1
        - planName1
        - planName2
        - totalFreeData
        - totalPlanAmount
      type: object
      properties:
        freeData:
          type: integer
        freeDataUnits:
          type: string
        totalFreeData:
          type: integer
        totalPlanAmount:
          type: integer
        planName1:
          type: string
        planName2:
          type: string
        offerBenefits1:
          type: string
        offerBenefits4:
          type: string
        offerBenefits3:
          type: string
        plan:
          type: string
        offerBenefits2:
          type: string
        subscriptions:
          type: string
        normalBenefits1:
          type: string
        normalBenefits4:
          type: string
        descChars:
          type: array
          items:
            $ref: "#/components/schemas/DescChars"
    FilterKeys:
      required:
        - data
        - price
      type: object
      properties:
        data:
          type: string
        price:
          type: string
        priceRange:
          type: string
        validity:
          type: string
        validityRange:
          type: string
        ott:
          type: string
    Plans:
      required:
        - amount
        - billingType
        - categoryLabel
        - description
        - expiryDays
        - filterKeys
        - id
        - key
        - name
        - planName
        - postOverPreFlag
        - primeData
        - primeFlag
        - quantity
        - redeemEligibleflag
        - transferEligibleflag
        - transferQuantity
        - upselling
        - voucherId
        - wrapperPlan
      type: object
      properties:
        name:
          type: string
        amount:
          type: string
        id:
          type: string
        description:
          type: string
        primeData:
          $ref: "#/components/schemas/PrimeData"
        primeFlag:
          type: string
        key:
          type: string
        planName:
          type: string
        categoryLabel:
          type: string
        quantity:
          type: integer
        transferEligibleflag:
          type: boolean
        transferQuantity:
          type: integer
        redeemEligibleflag:
          type: boolean
        expiryDays:
          type: integer
        wrapperPlan:
          type: boolean
        postOverPreFlag:
          type: boolean
        billingType:
          type: string
        upselling:
          type: boolean
        filterKeys:
          $ref: "#/components/schemas/FilterKeys"
        voucherId:
          type: string
        priceImageName:
          type: string
        badgeData:
          $ref: "#/components/schemas/BadgeData"
    SubCategories:
      required:
        - plans
        - sortOrder
        - type
        - typeFlag
      type: object
      properties:
        type:
          type: string
        typeFlag:
          type: boolean
        plans:
          type: array
          items:
            $ref: "#/components/schemas/Plans"
        sortOrder:
          type: integer
        note:
          $ref: "#/components/schemas/Note"
    PlanCategories:
      required:
        - customFilters
        - headerType
        - irFlag
        - isdFlag
        - notes
        - order
        - planHeader1
        - planHeader2
        - planHeader3
        - subCategories
        - type
      type: object
      properties:
        type:
          type: string
        headerType:
          type: string
        planHeader1:
          type: string
        planHeader2:
          type: string
        planHeader3:
          type: string
        irFlag:
          type: boolean
        isdFlag:
          type: boolean
        order:
          type: integer
        notes:
          type: array
          items:
            $ref: "#/components/schemas/Notes"
        subCategories:
          type: array
          items:
            $ref: "#/components/schemas/SubCategories"
        customFilters:
          type: array
          items:
            $ref: "#/components/schemas/CustomFilters"
        filters:
          $ref: "#/components/schemas/Filters"
        planHeader4:
          type: string
    RechargePlansServiceIdResponseBody:
      required:
        - planCategories
        - primeMember
        - productType
        - type
      type: object
      properties:
        planCategories:
          type: array
          items:
            $ref: "#/components/schemas/PlanCategories"
        productType:
          type: string
        primeMember:
          type: boolean
        type:
          type: string
    RechargeBuyRequestBody:
      required:
        - planKey
        - selectedService
      type: object
      properties:
        planKey:
          type: string
        selectedService:
          type: string
    RechargeBuyResponseBody:
      required:
        - bypassCart
        - fiberActivationFlow
        - irR2ServiceList
        - irServiceList
      type: object
      properties:
        bypassCart:
          type: boolean
        fiberActivationFlow:
          type: integer
        irServiceList:
          type: array
          items:
            type: string
        irR2ServiceList:
          type: array
          items:
            type: string
    ServicePlanList:
      required:
        - planKey
        - quantity
        - serviceId
      type: object
      properties:
        planKey:
          type: string
        quantity:
          type: integer
        serviceId:
          type: string
    RechargePayRequestBody:
      required:
        - addonPlanKeys
        - flexiTopupFlow
        - servicePlanList
      type: object
      properties:
        addonPlanKeys:
          type: array
          items:
            type: string
        flexiTopupFlow:
          type: boolean
        servicePlanList:
          type: array
          items:
            $ref: "#/components/schemas/ServicePlanList"
    RechargePayResponseBody:
      required:
        - paymentURL
        - rechargePOSFlow
      type: object
      properties:
        paymentURL:
          type: string
        rechargePOSFlow:
          type: boolean